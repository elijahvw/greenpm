{"ast":null,"code":"import React,{useState,useEffect}from'react';import{securityDepositService}from'../../services/securityDepositService';import{CurrencyDollarIcon,PlusIcon,BanknotesIcon,ExclamationTriangleIcon,CheckCircleIcon,ClockIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SecurityDepositsTab=()=>{const[deposits,setDeposits]=useState([]);const[loading,setLoading]=useState(true);const[selectedStatus,setSelectedStatus]=useState('all');useEffect(()=>{fetchDeposits();},[selectedStatus]);const fetchDeposits=async()=>{try{setLoading(true);const data=await securityDepositService.getSecurityDeposits();let filteredDeposits=data;if(selectedStatus!=='all'){filteredDeposits=data.filter(deposit=>deposit.status===selectedStatus);}setDeposits(filteredDeposits);}catch(error){console.error('Failed to fetch security deposits:',error);toast.error('Failed to load security deposits');}finally{setLoading(false);}};const handleAddDeduction=depositId=>{// TODO: Implement add deduction modal\ntoast('Add deduction functionality coming soon',{icon:'ðŸ’¡'});};const handleProcessRefund=depositId=>{// TODO: Implement process refund modal\ntoast('Process refund functionality coming soon',{icon:'ðŸ’¡'});};const getStatusBadge=status=>{const statusConfig={unpaid:{color:'bg-red-100 text-red-800',icon:ExclamationTriangleIcon,label:'Unpaid'},held:{color:'bg-blue-100 text-blue-800',icon:ClockIcon,label:'Held'},partial_refunded:{color:'bg-yellow-100 text-yellow-800',icon:ExclamationTriangleIcon,label:'Partial Refunded'},refunded:{color:'bg-green-100 text-green-800',icon:CheckCircleIcon,label:'Refunded'}};const config=statusConfig[status]||statusConfig.held;const IconComponent=config.icon;return/*#__PURE__*/_jsxs(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`,children:[/*#__PURE__*/_jsx(IconComponent,{className:\"w-3 h-3 mr-1\"}),config.label]});};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0,maximumFractionDigits:0}).format(amount);};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric'});};// Calculate summary stats\nconst totalDeposits=deposits.reduce((sum,deposit)=>sum+deposit.amount,0);const heldDeposits=deposits.filter(d=>d.status==='held');const refundedDeposits=deposits.filter(d=>d.status==='refunded'||d.status==='partial_refunded');const totalHeld=heldDeposits.reduce((sum,deposit)=>sum+deposit.amount,0);const totalRefunded=refundedDeposits.reduce((sum,deposit)=>{return sum+(deposit.refundAmount||0);},0);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500\"})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(BanknotesIcon,{className:\"h-5 w-5 text-blue-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Total Deposits\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:formatCurrency(totalDeposits)})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(ClockIcon,{className:\"h-5 w-5 text-yellow-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Currently Held\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:formatCurrency(totalHeld)})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5 text-green-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Total Refunded\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:formatCurrency(totalRefunded)})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 text-indigo-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Active Deposits\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:heldDeposits.length})]})})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"select\",{value:selectedStatus,onChange:e=>setSelectedStatus(e.target.value),className:\"rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"unpaid\",children:\"Unpaid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"held\",children:\"Held\"}),/*#__PURE__*/_jsx(\"option\",{value:\"partial_refunded\",children:\"Partial Refunded\"}),/*#__PURE__*/_jsx(\"option\",{value:\"refunded\",children:\"Refunded\"})]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toast('Create deposit functionality coming soon',{icon:'ðŸ’¡'}),className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Record Deposit\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow overflow-hidden sm:rounded-md\",children:deposits.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BanknotesIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No security deposits\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Get started by recording your first security deposit.\"})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200\",children:deposits.map(deposit=>/*#__PURE__*/_jsx(\"li\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(BanknotesIcon,{className:\"h-6 w-6 text-gray-600\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:deposit.property_address||'Unknown Property'}),getStatusBadge(deposit.status)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Tenant: \",deposit.tenant_name||'Unknown']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-400\",children:[\"Received: \",formatDate(deposit.dateReceived)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-gray-900\",children:formatCurrency(deposit.amount)}),deposit.refundAmount&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-600\",children:[\"Refunded: \",formatCurrency(deposit.refundAmount)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[deposit.status==='held'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddDeduction(deposit.id),className:\"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:\"Add Deduction\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleProcessRefund(deposit.id),className:\"inline-flex items-center px-2.5 py-1.5 border border-transparent shadow-sm text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\",children:\"Process Refund\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toast('View details functionality coming soon',{icon:'ðŸ’¡'}),className:\"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:\"View Details\"})]})]})]})},deposit.id))})})]});};export default SecurityDepositsTab;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}