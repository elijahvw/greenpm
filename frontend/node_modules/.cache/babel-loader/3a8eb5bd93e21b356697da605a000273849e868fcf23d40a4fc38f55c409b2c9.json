{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import{DashboardService}from'../services/api';import{BuildingOfficeIcon,DocumentTextIcon,ClipboardDocumentListIcon,WrenchScrewdriverIcon,CreditCardIcon,ExclamationTriangleIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{const{user}=useAuth();const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{fetchDashboardData();},[]);const fetchDashboardData=async()=>{try{const data=await DashboardService.getDashboardStats();setStats(data);}catch(err){setError(err.message||'Failed to fetch dashboard data');}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-md p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-5 w-5 text-red-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 mt-1\",children:error})]})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:[\"Welcome back, \",user===null||user===void 0?void 0:user.first_name,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:[\"Here's what's happening with your \",(user===null||user===void 0?void 0:user.role)==='tenant'?'rental':'properties',\" today.\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\",children:[(user===null||user===void 0?void 0:user.role)==='landlord'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StatCard,{title:\"Total Properties\",value:(stats===null||stats===void 0?void 0:stats.total_properties)||0,icon:BuildingOfficeIcon,color:\"bg-blue-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Active Leases\",value:(stats===null||stats===void 0?void 0:stats.active_leases)||0,icon:ClipboardDocumentListIcon,color:\"bg-green-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Pending Applications\",value:(stats===null||stats===void 0?void 0:stats.pending_applications)||0,icon:DocumentTextIcon,color:\"bg-yellow-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Open Maintenance\",value:(stats===null||stats===void 0?void 0:stats.open_maintenance)||0,icon:WrenchScrewdriverIcon,color:\"bg-red-500\"})]}),(user===null||user===void 0?void 0:user.role)==='tenant'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StatCard,{title:\"Active Applications\",value:(stats===null||stats===void 0?void 0:stats.active_applications)||0,icon:DocumentTextIcon,color:\"bg-blue-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Current Lease\",value:stats!==null&&stats!==void 0&&stats.current_lease?1:0,icon:ClipboardDocumentListIcon,color:\"bg-green-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Maintenance Requests\",value:(stats===null||stats===void 0?void 0:stats.maintenance_requests)||0,icon:WrenchScrewdriverIcon,color:\"bg-yellow-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Pending Payments\",value:(stats===null||stats===void 0?void 0:stats.pending_payments)||0,icon:CreditCardIcon,color:\"bg-red-500\"})]}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StatCard,{title:\"Total Users\",value:(stats===null||stats===void 0?void 0:stats.total_users)||0,icon:BuildingOfficeIcon,color:\"bg-blue-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Total Properties\",value:(stats===null||stats===void 0?void 0:stats.total_properties)||0,icon:BuildingOfficeIcon,color:\"bg-green-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Active Leases\",value:(stats===null||stats===void 0?void 0:stats.active_leases)||0,icon:ClipboardDocumentListIcon,color:\"bg-yellow-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Open Maintenance\",value:(stats===null||stats===void 0?void 0:stats.open_maintenance)||0,icon:WrenchScrewdriverIcon,color:\"bg-red-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(RecentActivity,{activities:(stats===null||stats===void 0?void 0:stats.recent_activities)||[]}),/*#__PURE__*/_jsx(QuickActions,{userRole:user===null||user===void 0?void 0:user.role})]})]});};const StatCard=_ref=>{let{title,value,icon:Icon,color}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:`${color} rounded-md p-3`,children:/*#__PURE__*/_jsx(Icon,{className:\"h-6 w-6 text-white\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:title}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:value})]})})]})})});};const RecentActivity=_ref2=>{let{activities}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900\",children:\"Recent Activity\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5\",children:activities.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"No recent activity\"}):/*#__PURE__*/_jsx(\"div\",{className:\"flow-root\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"-mb-8\",children:activities.map((activity,index)=>{var _activity$type;return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative pb-8\",children:[index!==activities.length-1&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex h-8 w-8 items-center justify-center rounded-full bg-gray-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-white\",children:(_activity$type=activity.type)===null||_activity$type===void 0?void 0:_activity$type.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex min-w-0 flex-1 justify-between space-x-4 pt-1.5\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:activity.description})}),/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-nowrap text-right text-sm text-gray-500\",children:new Date(activity.created_at).toLocaleDateString()})]})]})]})},index);})})})})]})});};const QuickActions=_ref3=>{let{userRole}=_ref3;const actions=getQuickActions(userRole);return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900\",children:\"Quick Actions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 grid grid-cols-1 gap-3\",children:actions.map((action,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:action.onClick,className:\"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\",children:[/*#__PURE__*/_jsx(action.icon,{className:\"h-4 w-4 mr-2\"}),action.title]},index))})]})});};function getQuickActions(userRole){const baseActions=[{title:'View Messages',icon:DocumentTextIcon,onClick:()=>window.location.href='/messages'}];switch(userRole){case'tenant':return[{title:'Submit Maintenance Request',icon:WrenchScrewdriverIcon,onClick:()=>window.location.href='/maintenance/new'},{title:'View Lease',icon:ClipboardDocumentListIcon,onClick:()=>window.location.href='/leases'},...baseActions];case'landlord':return[{title:'Add Property',icon:BuildingOfficeIcon,onClick:()=>window.location.href='/properties/new'},{title:'View Applications',icon:DocumentTextIcon,onClick:()=>window.location.href='/applications'},...baseActions];default:return baseActions;}}export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}