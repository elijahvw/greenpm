{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import{MessageService}from'../services/api';import{PlusIcon,MagnifyingGlassIcon,ChatBubbleLeftRightIcon,PaperAirplaneIcon,EllipsisVerticalIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Messages=()=>{var _selectedThread$parti;const{user}=useAuth();const[threads,setThreads]=useState([]);const[selectedThread,setSelectedThread]=useState(null);const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[searchTerm,setSearchTerm]=useState('');useEffect(()=>{fetchThreads();},[]);useEffect(()=>{if(selectedThread){fetchMessages(selectedThread.id);}},[selectedThread]);const fetchThreads=async()=>{try{setLoading(true);const data=await MessageService.getThreads();setThreads(data.threads);}catch(err){setError(err.message||'Failed to fetch message threads');}finally{setLoading(false);}};const fetchMessages=async threadId=>{try{const data=await MessageService.getMessages(threadId);setMessages(data.messages);// Mark thread as read\nawait MessageService.markThreadRead(threadId);}catch(err){setError(err.message||'Failed to fetch messages');}};const handleSendMessage=async e=>{e.preventDefault();if(!newMessage.trim()||!selectedThread)return;try{await MessageService.sendMessage({thread_id:selectedThread.id,content:newMessage.trim()});setNewMessage('');fetchMessages(selectedThread.id);fetchThreads();// Refresh thread list\n}catch(err){setError(err.message||'Failed to send message');}};const filteredThreads=threads.filter(thread=>{var _thread$subject,_thread$participants;return((_thread$subject=thread.subject)===null||_thread$subject===void 0?void 0:_thread$subject.toLowerCase().includes(searchTerm.toLowerCase()))||((_thread$participants=thread.participants)===null||_thread$participants===void 0?void 0:_thread$participants.some(p=>{var _p$email;return(_p$email=p.email)===null||_p$email===void 0?void 0:_p$email.toLowerCase().includes(searchTerm.toLowerCase());}));});if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/3 border-r border-gray-200 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold text-gray-900\",children:\"Messages\"}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(PlusIcon,{className:\"h-5 w-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"Search messages...\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:filteredThreads.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-gray-500\",children:searchTerm?'No threads found':'No messages yet'}):filteredThreads.map(thread=>/*#__PURE__*/_jsx(ThreadItem,{thread:thread,isSelected:(selectedThread===null||selectedThread===void 0?void 0:selectedThread.id)===thread.id,onClick:()=>setSelectedThread(thread),currentUserId:user===null||user===void 0?void 0:user.id},thread.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex flex-col\",children:selectedThread?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:selectedThread.subject||'Conversation'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[(_selectedThread$parti=selectedThread.participants)===null||_selectedThread$parti===void 0?void 0:_selectedThread$parti.length,\" participants\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(EllipsisVerticalIcon,{className:\"h-5 w-5\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4\",children:messages.map(message=>/*#__PURE__*/_jsx(MessageItem,{message:message,isOwn:message.sender_id===(user===null||user===void 0?void 0:user.id)},message.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newMessage,onChange:e=>setNewMessage(e.target.value),placeholder:\"Type a message...\",className:\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!newMessage.trim(),className:\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\",children:/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-5 w-5\"})})]})})]}):/*#__PURE__*//* Empty State */_jsx(\"div\",{className:\"flex-1 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No conversation selected\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Choose a conversation from the sidebar to start messaging\"})]})})}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded-md shadow-lg\",children:[error,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(null),className:\"ml-2 text-red-200 hover:text-white\",children:\"\\xD7\"})]})]});};const ThreadItem=_ref=>{var _thread$participants2;let{thread,isSelected,onClick,currentUserId}=_ref;const otherParticipants=((_thread$participants2=thread.participants)===null||_thread$participants2===void 0?void 0:_thread$participants2.filter(p=>p.id!==currentUserId))||[];return/*#__PURE__*/_jsxs(\"div\",{onClick:onClick,className:`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${isSelected?'bg-green-50 border-green-200':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 truncate\",children:thread.subject||'No subject'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 truncate\",children:otherParticipants.map(p=>p.email).join(', ')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 ml-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:new Date(thread.last_message_at).toLocaleDateString()})})]}),thread.last_message&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600 truncate\",children:thread.last_message})]});};const MessageItem=_ref2=>{let{message,isOwn}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:`flex ${isOwn?'justify-end':'justify-start'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${isOwn?'bg-green-600 text-white':'bg-gray-100 text-gray-900'}`,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:message.content}),/*#__PURE__*/_jsx(\"p\",{className:`text-xs mt-1 ${isOwn?'text-green-100':'text-gray-500'}`,children:new Date(message.created_at).toLocaleTimeString()})]})});};export default Messages;","map":{"version":3,"names":["React","useState","useEffect","useAuth","MessageService","PlusIcon","MagnifyingGlassIcon","ChatBubbleLeftRightIcon","PaperAirplaneIcon","EllipsisVerticalIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Messages","_selectedThread$parti","user","threads","setThreads","selectedThread","setSelectedThread","messages","setMessages","newMessage","setNewMessage","loading","setLoading","error","setError","searchTerm","setSearchTerm","fetchThreads","fetchMessages","id","data","getThreads","err","message","threadId","getMessages","markThreadRead","handleSendMessage","e","preventDefault","trim","sendMessage","thread_id","content","filteredThreads","filter","thread","_thread$subject","_thread$participants","subject","toLowerCase","includes","participants","some","p","_p$email","email","className","children","type","value","onChange","target","placeholder","length","map","ThreadItem","isSelected","onClick","currentUserId","MessageItem","isOwn","sender_id","onSubmit","disabled","_ref","_thread$participants2","otherParticipants","join","Date","last_message_at","toLocaleDateString","last_message","_ref2","created_at","toLocaleTimeString"],"sources":["/Users/elijahward/Documents/greenpm/frontend/src/pages/Messages.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { MessageService } from '../services/api';\nimport { \n  PlusIcon, \n  MagnifyingGlassIcon, \n  ChatBubbleLeftRightIcon,\n  PaperAirplaneIcon,\n  EllipsisVerticalIcon\n} from '@heroicons/react/24/outline';\n\nconst Messages: React.FC = () => {\n  const { user } = useAuth();\n  const [threads, setThreads] = useState<any[]>([]);\n  const [selectedThread, setSelectedThread] = useState<any>(null);\n  const [messages, setMessages] = useState<any[]>([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  useEffect(() => {\n    fetchThreads();\n  }, []);\n\n  useEffect(() => {\n    if (selectedThread) {\n      fetchMessages(selectedThread.id);\n    }\n  }, [selectedThread]);\n\n  const fetchThreads = async () => {\n    try {\n      setLoading(true);\n      const data = await MessageService.getThreads();\n      setThreads(data.threads);\n    } catch (err: any) {\n      setError(err.message || 'Failed to fetch message threads');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMessages = async (threadId: string) => {\n    try {\n      const data = await MessageService.getMessages(threadId);\n      setMessages(data.messages);\n      \n      // Mark thread as read\n      await MessageService.markThreadRead(threadId);\n    } catch (err: any) {\n      setError(err.message || 'Failed to fetch messages');\n    }\n  };\n\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !selectedThread) return;\n\n    try {\n      await MessageService.sendMessage({\n        thread_id: selectedThread.id,\n        content: newMessage.trim()\n      });\n      \n      setNewMessage('');\n      fetchMessages(selectedThread.id);\n      fetchThreads(); // Refresh thread list\n    } catch (err: any) {\n      setError(err.message || 'Failed to send message');\n    }\n  };\n\n  const filteredThreads = threads.filter(thread =>\n    thread.subject?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    thread.participants?.some((p: any) => \n      p.email?.toLowerCase().includes(searchTerm.toLowerCase())\n    )\n  );\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex h-screen bg-white\">\n      {/* Sidebar */}\n      <div className=\"w-1/3 border-r border-gray-200 flex flex-col\">\n        {/* Header */}\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h1 className=\"text-xl font-semibold text-gray-900\">Messages</h1>\n            <button className=\"p-2 text-gray-400 hover:text-gray-600\">\n              <PlusIcon className=\"h-5 w-5\" />\n            </button>\n          </div>\n          \n          {/* Search */}\n          <div className=\"mt-4 relative\">\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n              <MagnifyingGlassIcon className=\"h-5 w-5 text-gray-400\" />\n            </div>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500 sm:text-sm\"\n              placeholder=\"Search messages...\"\n            />\n          </div>\n        </div>\n\n        {/* Thread List */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {filteredThreads.length === 0 ? (\n            <div className=\"p-4 text-center text-gray-500\">\n              {searchTerm ? 'No threads found' : 'No messages yet'}\n            </div>\n          ) : (\n            filteredThreads.map((thread) => (\n              <ThreadItem\n                key={thread.id}\n                thread={thread}\n                isSelected={selectedThread?.id === thread.id}\n                onClick={() => setSelectedThread(thread)}\n                currentUserId={user?.id}\n              />\n            ))\n          )}\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col\">\n        {selectedThread ? (\n          <>\n            {/* Chat Header */}\n            <div className=\"p-4 border-b border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-lg font-medium text-gray-900\">\n                    {selectedThread.subject || 'Conversation'}\n                  </h2>\n                  <p className=\"text-sm text-gray-500\">\n                    {selectedThread.participants?.length} participants\n                  </p>\n                </div>\n                <button className=\"p-2 text-gray-400 hover:text-gray-600\">\n                  <EllipsisVerticalIcon className=\"h-5 w-5\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Messages */}\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n              {messages.map((message) => (\n                <MessageItem\n                  key={message.id}\n                  message={message}\n                  isOwn={message.sender_id === user?.id}\n                />\n              ))}\n            </div>\n\n            {/* Message Input */}\n            <div className=\"p-4 border-t border-gray-200\">\n              <form onSubmit={handleSendMessage} className=\"flex space-x-2\">\n                <input\n                  type=\"text\"\n                  value={newMessage}\n                  onChange={(e) => setNewMessage(e.target.value)}\n                  placeholder=\"Type a message...\"\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500\"\n                />\n                <button\n                  type=\"submit\"\n                  disabled={!newMessage.trim()}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  <PaperAirplaneIcon className=\"h-5 w-5\" />\n                </button>\n              </form>\n            </div>\n          </>\n        ) : (\n          /* Empty State */\n          <div className=\"flex-1 flex items-center justify-center\">\n            <div className=\"text-center\">\n              <ChatBubbleLeftRightIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No conversation selected</h3>\n              <p className=\"mt-1 text-sm text-gray-500\">\n                Choose a conversation from the sidebar to start messaging\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Error Toast */}\n      {error && (\n        <div className=\"fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded-md shadow-lg\">\n          {error}\n          <button\n            onClick={() => setError(null)}\n            className=\"ml-2 text-red-200 hover:text-white\"\n          >\n            ×\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst ThreadItem: React.FC<{\n  thread: any;\n  isSelected: boolean;\n  onClick: () => void;\n  currentUserId?: string;\n}> = ({ thread, isSelected, onClick, currentUserId }) => {\n  const otherParticipants = thread.participants?.filter(\n    (p: any) => p.id !== currentUserId\n  ) || [];\n\n  return (\n    <div\n      onClick={onClick}\n      className={`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${\n        isSelected ? 'bg-green-50 border-green-200' : ''\n      }`}\n    >\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"text-sm font-medium text-gray-900 truncate\">\n            {thread.subject || 'No subject'}\n          </p>\n          <p className=\"text-sm text-gray-500 truncate\">\n            {otherParticipants.map((p: any) => p.email).join(', ')}\n          </p>\n        </div>\n        <div className=\"flex-shrink-0 ml-2\">\n          <p className=\"text-xs text-gray-500\">\n            {new Date(thread.last_message_at).toLocaleDateString()}\n          </p>\n        </div>\n      </div>\n      \n      {thread.last_message && (\n        <p className=\"mt-1 text-sm text-gray-600 truncate\">\n          {thread.last_message}\n        </p>\n      )}\n    </div>\n  );\n};\n\nconst MessageItem: React.FC<{\n  message: any;\n  isOwn: boolean;\n}> = ({ message, isOwn }) => {\n  return (\n    <div className={`flex ${isOwn ? 'justify-end' : 'justify-start'}`}>\n      <div\n        className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n          isOwn\n            ? 'bg-green-600 text-white'\n            : 'bg-gray-100 text-gray-900'\n        }`}\n      >\n        <p className=\"text-sm\">{message.content}</p>\n        <p className={`text-xs mt-1 ${isOwn ? 'text-green-100' : 'text-gray-500'}`}>\n          {new Date(message.created_at).toLocaleTimeString()}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Messages;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}