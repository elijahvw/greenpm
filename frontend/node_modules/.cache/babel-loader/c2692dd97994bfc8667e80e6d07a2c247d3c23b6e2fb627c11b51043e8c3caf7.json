{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Dialog}from'@headlessui/react';import{useForm}from'react-hook-form';import{XMarkIcon,PencilIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TenantEditModal=_ref=>{let{isOpen,onClose,tenant,onSubmit}=_ref;const[loading,setLoading]=useState(false);const{register,handleSubmit,reset,formState:{errors}}=useForm();useEffect(()=>{if(isOpen&&tenant){var _tenant$employment,_tenant$employment2,_tenant$emergencyCont,_tenant$emergencyCont2,_tenant$emergencyCont3;reset({firstName:tenant.firstName||'',lastName:tenant.lastName||'',email:tenant.email||'',phone:tenant.phone||'',dateOfBirth:(tenant.dateOfBirth||'').split('T')[0],employmentStatus:'employed',// Default since tenant type doesn't have this field\nemployer:((_tenant$employment=tenant.employment)===null||_tenant$employment===void 0?void 0:_tenant$employment.employer)||'',monthlyIncome:((_tenant$employment2=tenant.employment)===null||_tenant$employment2===void 0?void 0:_tenant$employment2.monthlyIncome)||0,emergencyContactName:((_tenant$emergencyCont=tenant.emergencyContact)===null||_tenant$emergencyCont===void 0?void 0:_tenant$emergencyCont.name)||'',emergencyContactPhone:((_tenant$emergencyCont2=tenant.emergencyContact)===null||_tenant$emergencyCont2===void 0?void 0:_tenant$emergencyCont2.phone)||'',emergencyContactRelation:((_tenant$emergencyCont3=tenant.emergencyContact)===null||_tenant$emergencyCont3===void 0?void 0:_tenant$emergencyCont3.relationship)||'',previousAddress:'',// Not in tenant type\nnotes:tenant.notes||'',status:tenant.status||'active',moveInDate:(tenant.moveInDate||'').split('T')[0],moveOutDate:(tenant.moveOutDate||'').split('T')[0]});}},[isOpen,tenant,reset]);const handleFormSubmit=async data=>{try{setLoading(true);const updateData={id:tenant.id,firstName:data.firstName,lastName:data.lastName,email:data.email,phone:data.phone,dateOfBirth:data.dateOfBirth,employment:{employer:data.employer,position:'',// Default since not in form\nmonthlyIncome:data.monthlyIncome,employmentStartDate:''// Default since not in form\n},emergencyContact:{name:data.emergencyContactName,phone:data.emergencyContactPhone,relationship:data.emergencyContactRelation},notes:data.notes,status:data.status,moveInDate:data.moveInDate,moveOutDate:data.moveOutDate};await onSubmit(updateData);onClose();}catch(error){console.error('Error updating tenant:',error);}finally{setLoading(false);}};if(!isOpen)return null;return/*#__PURE__*/_jsxs(Dialog,{open:isOpen,onClose:onClose,className:\"relative z-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-25\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 overflow-y-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex min-h-full items-center justify-center p-4 text-center\",children:/*#__PURE__*/_jsxs(Dialog.Panel,{className:\"w-full max-w-4xl transform overflow-hidden rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(PencilIcon,{className:\"h-6 w-6 text-blue-600 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Dialog.Title,{className:\"text-lg font-medium text-gray-900\",children:\"Edit Tenant\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Update tenant information\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"rounded-md bg-white text-gray-400 hover:text-gray-500\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handleFormSubmit),className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Personal Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('firstName',{required:'First name is required'}),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"}),errors.firstName&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-red-600\",children:errors.firstName.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Last Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('lastName',{required:'Last name is required'}),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"}),errors.lastName&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-red-600\",children:errors.lastName.message})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",...register('email',{required:'Email is required',pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:'Invalid email address'}}),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-red-600\",children:errors.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",...register('phone'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Date of Birth\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",...register('dateOfBirth'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{...register('status'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Employment Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Employment Status\"}),/*#__PURE__*/_jsxs(\"select\",{...register('employmentStatus'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"employed\",children:\"Employed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"self-employed\",children:\"Self-Employed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"unemployed\",children:\"Unemployed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"retired\",children:\"Retired\"}),/*#__PURE__*/_jsx(\"option\",{value:\"student\",children:\"Student\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Employer\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('employer'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Monthly Income\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute left-3 top-2 text-gray-500\",children:\"$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",...register('monthlyIncome',{min:0}),className:\"pl-8 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Emergency Contact\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Contact Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('emergencyContactName'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Contact Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",...register('emergencyContactPhone'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Relationship\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('emergencyContactRelation'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\",placeholder:\"e.g., Parent, Sibling, Friend\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Lease Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Move-In Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",...register('moveInDate'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Move-Out Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",...register('moveOutDate'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Previous Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('previousAddress'),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\",placeholder:\"Previous residence address\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{...register('notes'),rows:3,className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\",placeholder:\"Internal notes about this tenant...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,disabled:loading,className:\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:loading,className:\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),loading?'Saving...':'Save Changes']})]})]})]})})})]});};export default TenantEditModal;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}