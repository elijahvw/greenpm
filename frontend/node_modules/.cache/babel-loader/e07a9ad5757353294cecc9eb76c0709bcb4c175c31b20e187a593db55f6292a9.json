{"ast":null,"code":"import { api } from './api';\nexport const leaseService = {\n  // Get all leases for the current landlord\n  async getLeases() {\n    const response = await api.get('/leases/');\n    return response.data;\n  },\n  // Get a single lease by ID\n  async getLease(id) {\n    const response = await api.get(`/leases/${id}`);\n    return response.data;\n  },\n  // Create a new lease\n  async createLease(lease) {\n    var _lease$petPolicy, _lease$landlordRespon, _lease$petPolicy2, _lease$tenantResponsi;\n    // Transform frontend payload to match backend GCP database schema\n    const backendPayload = {\n      property_id: lease.propertyId,\n      tenant_id: lease.tenantId,\n      start_date: lease.startDate,\n      end_date: lease.endDate,\n      monthly_rent: lease.monthlyRent,\n      security_deposit: lease.securityDeposit || 0,\n      late_fee_amount: lease.lateFeePenalty || 0,\n      late_fee_grace_period: lease.gracePeriodDays || 5,\n      lease_terms: {\n        pet_policy: ((_lease$petPolicy = lease.petPolicy) === null || _lease$petPolicy === void 0 ? void 0 : _lease$petPolicy.restrictions) || null,\n        smoking_allowed: false,\n        // Default value\n        subletting_allowed: false,\n        // Default value\n        maintenance_responsibility: ((_lease$landlordRespon = lease.landlordResponsibilities) === null || _lease$landlordRespon === void 0 ? void 0 : _lease$landlordRespon.join(', ')) || null,\n        utilities_included: lease.utilitiesIncluded || [],\n        parking_included: false,\n        // Default value\n        additional_terms: [lease.specialTerms, lease.notes, `Lease Type: ${lease.leaseType}`, `Renewal Option: ${lease.renewalOption ? 'Yes' : 'No'}`, (_lease$petPolicy2 = lease.petPolicy) !== null && _lease$petPolicy2 !== void 0 && _lease$petPolicy2.allowed ? `Pet Policy: Allowed (Deposit: $${lease.petPolicy.deposit}, Monthly: $${lease.petPolicy.monthlyFee})` : 'Pet Policy: Not Allowed', `Tenant Responsibilities: ${((_lease$tenantResponsi = lease.tenantResponsibilities) === null || _lease$tenantResponsi === void 0 ? void 0 : _lease$tenantResponsi.join(', ')) || 'None specified'}`].filter(Boolean).join('\\n\\n')\n      }\n    };\n    console.log('ðŸ”„ Original lease data:', lease);\n    console.log('ðŸ”„ Transformed lease payload for GCP DB:', backendPayload);\n    const response = await api.post('/leases', backendPayload);\n    return response.data;\n  },\n  // Update an existing lease\n  async updateLease(lease) {\n    const response = await api.put(`/leases/${lease.id}`, lease);\n    return response.data;\n  },\n  // Delete a lease\n  async deleteLease(id) {\n    await api.delete(`/leases/${id}`);\n  },\n  // Get leases by property\n  async getLeasesByProperty(propertyId) {\n    const response = await api.get(`/leases?propertyId=${propertyId}`);\n    return response.data;\n  },\n  // Get leases by tenant\n  async getLeasesByTenant(tenantId) {\n    const response = await api.get(`/leases?tenantId=${tenantId}`);\n    return response.data;\n  },\n  // Get active leases\n  async getActiveLeases() {\n    const response = await api.get('/leases?status=active');\n    return response.data;\n  },\n  // Get expiring leases (within specified days)\n  async getExpiringLeases(days = 30) {\n    const response = await api.get(`/leases/expiring?days=${days}`);\n    return response.data;\n  },\n  // Terminate a lease\n  async terminateLease(leaseId, termination) {\n    const response = await api.post(`/leases/${leaseId}/terminate`, termination);\n    return response.data;\n  },\n  // Renew a lease\n  async renewLease(leaseId, renewal) {\n    const response = await api.post(`/leases/${leaseId}/renew`, renewal);\n    return response.data;\n  },\n  // Upload lease documents\n  async uploadDocuments(leaseId, files) {\n    const formData = new FormData();\n    files.forEach(file => {\n      formData.append('documents', file);\n    });\n    const response = await api.post(`/leases/${leaseId}/documents`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data.documentUrls;\n  },\n  // Delete lease document\n  async deleteDocument(leaseId, documentUrl) {\n    await api.delete(`/leases/${leaseId}/documents`, {\n      data: {\n        documentUrl\n      }\n    });\n  },\n  // Generate lease document\n  async generateLeaseDocument(leaseId) {\n    const response = await api.post(`/leases/${leaseId}/generate-document`);\n    return response.data.documentUrl;\n  },\n  // Sign lease\n  async signLease(leaseId, signatureData) {\n    const response = await api.post(`/leases/${leaseId}/sign`, signatureData);\n    return response.data;\n  }\n};","map":{"version":3,"names":["api","leaseService","getLeases","response","get","data","getLease","id","createLease","lease","_lease$petPolicy","_lease$landlordRespon","_lease$petPolicy2","_lease$tenantResponsi","backendPayload","property_id","propertyId","tenant_id","tenantId","start_date","startDate","end_date","endDate","monthly_rent","monthlyRent","security_deposit","securityDeposit","late_fee_amount","lateFeePenalty","late_fee_grace_period","gracePeriodDays","lease_terms","pet_policy","petPolicy","restrictions","smoking_allowed","subletting_allowed","maintenance_responsibility","landlordResponsibilities","join","utilities_included","utilitiesIncluded","parking_included","additional_terms","specialTerms","notes","leaseType","renewalOption","allowed","deposit","monthlyFee","tenantResponsibilities","filter","Boolean","console","log","post","updateLease","put","deleteLease","delete","getLeasesByProperty","getLeasesByTenant","getActiveLeases","getExpiringLeases","days","terminateLease","leaseId","termination","renewLease","renewal","uploadDocuments","files","formData","FormData","forEach","file","append","headers","documentUrls","deleteDocument","documentUrl","generateLeaseDocument","signLease","signatureData"],"sources":["/Users/elijahward/Documents/greenpm/frontend/src/services/leaseService.ts"],"sourcesContent":["import { api } from './api';\nimport { Lease, CreateLeaseRequest, UpdateLeaseRequest, LeaseRenewal, LeaseTermination } from '../types/lease';\n\nexport const leaseService = {\n  // Get all leases for the current landlord\n  async getLeases(): Promise<Lease[]> {\n    const response = await api.get('/leases/');\n    return response.data;\n  },\n\n  // Get a single lease by ID\n  async getLease(id: string): Promise<Lease> {\n    const response = await api.get(`/leases/${id}`);\n    return response.data;\n  },\n\n  // Create a new lease\n  async createLease(lease: CreateLeaseRequest): Promise<Lease> {\n    // Transform frontend payload to match backend GCP database schema\n    const backendPayload = {\n      property_id: lease.propertyId,\n      tenant_id: lease.tenantId,\n      start_date: lease.startDate,\n      end_date: lease.endDate,\n      monthly_rent: lease.monthlyRent,\n      security_deposit: lease.securityDeposit || 0,\n      late_fee_amount: lease.lateFeePenalty || 0,\n      late_fee_grace_period: lease.gracePeriodDays || 5,\n      lease_terms: {\n        pet_policy: lease.petPolicy?.restrictions || null,\n        smoking_allowed: false, // Default value\n        subletting_allowed: false, // Default value\n        maintenance_responsibility: lease.landlordResponsibilities?.join(', ') || null,\n        utilities_included: lease.utilitiesIncluded || [],\n        parking_included: false, // Default value\n        additional_terms: [\n          lease.specialTerms,\n          lease.notes,\n          `Lease Type: ${lease.leaseType}`,\n          `Renewal Option: ${lease.renewalOption ? 'Yes' : 'No'}`,\n          lease.petPolicy?.allowed ? `Pet Policy: Allowed (Deposit: $${lease.petPolicy.deposit}, Monthly: $${lease.petPolicy.monthlyFee})` : 'Pet Policy: Not Allowed',\n          `Tenant Responsibilities: ${lease.tenantResponsibilities?.join(', ') || 'None specified'}`\n        ].filter(Boolean).join('\\n\\n')\n      }\n    };\n\n    console.log('ðŸ”„ Original lease data:', lease);\n    console.log('ðŸ”„ Transformed lease payload for GCP DB:', backendPayload);\n    const response = await api.post('/leases', backendPayload);\n    return response.data;\n  },\n\n  // Update an existing lease\n  async updateLease(lease: UpdateLeaseRequest): Promise<Lease> {\n    const response = await api.put(`/leases/${lease.id}`, lease);\n    return response.data;\n  },\n\n  // Delete a lease\n  async deleteLease(id: string): Promise<void> {\n    await api.delete(`/leases/${id}`);\n  },\n\n  // Get leases by property\n  async getLeasesByProperty(propertyId: string): Promise<Lease[]> {\n    const response = await api.get(`/leases?propertyId=${propertyId}`);\n    return response.data;\n  },\n\n  // Get leases by tenant\n  async getLeasesByTenant(tenantId: string): Promise<Lease[]> {\n    const response = await api.get(`/leases?tenantId=${tenantId}`);\n    return response.data;\n  },\n\n  // Get active leases\n  async getActiveLeases(): Promise<Lease[]> {\n    const response = await api.get('/leases?status=active');\n    return response.data;\n  },\n\n  // Get expiring leases (within specified days)\n  async getExpiringLeases(days: number = 30): Promise<Lease[]> {\n    const response = await api.get(`/leases/expiring?days=${days}`);\n    return response.data;\n  },\n\n  // Terminate a lease\n  async terminateLease(leaseId: string, termination: Omit<LeaseTermination, 'id' | 'leaseId' | 'createdAt'>): Promise<LeaseTermination> {\n    const response = await api.post(`/leases/${leaseId}/terminate`, termination);\n    return response.data;\n  },\n\n  // Renew a lease\n  async renewLease(leaseId: string, renewal: Omit<LeaseRenewal, 'id' | 'originalLeaseId' | 'createdAt'>): Promise<LeaseRenewal> {\n    const response = await api.post(`/leases/${leaseId}/renew`, renewal);\n    return response.data;\n  },\n\n  // Upload lease documents\n  async uploadDocuments(leaseId: string, files: File[]): Promise<string[]> {\n    const formData = new FormData();\n    files.forEach((file) => {\n      formData.append('documents', file);\n    });\n\n    const response = await api.post(`/leases/${leaseId}/documents`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n    return response.data.documentUrls;\n  },\n\n  // Delete lease document\n  async deleteDocument(leaseId: string, documentUrl: string): Promise<void> {\n    await api.delete(`/leases/${leaseId}/documents`, {\n      data: { documentUrl },\n    });\n  },\n\n  // Generate lease document\n  async generateLeaseDocument(leaseId: string): Promise<string> {\n    const response = await api.post(`/leases/${leaseId}/generate-document`);\n    return response.data.documentUrl;\n  },\n\n  // Sign lease\n  async signLease(leaseId: string, signatureData: { signature: string; signedBy: string }): Promise<Lease> {\n    const response = await api.post(`/leases/${leaseId}/sign`, signatureData);\n    return response.data;\n  },\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}