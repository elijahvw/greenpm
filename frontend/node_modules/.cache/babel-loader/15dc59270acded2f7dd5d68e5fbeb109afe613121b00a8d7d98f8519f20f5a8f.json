{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useForm}from'react-hook-form';import{XMarkIcon,PlusIcon,TrashIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PropertyForm=_ref=>{var _errors$address,_errors$address2,_errors$address3,_errors$address4,_errors$address5;let{property,isOpen,onClose,onSubmit,loading=false}=_ref;const[amenities,setAmenities]=useState([]);const[newAmenity,setNewAmenity]=useState('');const{register,handleSubmit,reset,formState:{errors},setValue,watch}=useForm();useEffect(()=>{if(property){// Populate form with existing property data - try all possible name fields\nconst propertyName=property.name||property.title||property.name||'';console.log('Populating form with property:',property);console.log('Property name found:',propertyName);setValue('name',propertyName);// Handle address - parse address_line1 to separate street and unit\nconst addressLine1=property.address_line1||'';const city=property.city||'';const state=property.state||'';const zipCode=property.zipCode||property.zip_code||'';// Parse street and unit from address_line1 (format: \"123 Main St, Apt 2B\")\nlet street='';let unit='';if(addressLine1){console.log('ðŸ  Parsing address_line1:',addressLine1);// Look for comma to separate street from unit\nconst commaIndex=addressLine1.lastIndexOf(',');if(commaIndex>0){street=addressLine1.substring(0,commaIndex).trim();unit=addressLine1.substring(commaIndex+1).trim();console.log('ðŸ  Parsed - Street:',street,'Unit:',unit);}else{// No comma found, entire string is street\nstreet=addressLine1.trim();console.log('ðŸ  No comma found - Street:',street,'Unit: (empty)');}}if(typeof property.address==='string'){// For string addresses, we'll need to parse or set defaults\nsetValue('address.street',street);setValue('address.unit',unit);setValue('address.city',city);setValue('address.state',state);setValue('address.zipCode',zipCode);setValue('address.country','USA');}else if(property.address&&typeof property.address==='object'){setValue('address.street',property.address.street||street);setValue('address.unit',property.address.unit||unit);setValue('address.city',property.address.city||city);setValue('address.state',property.address.state||state);setValue('address.zipCode',property.address.zipCode||zipCode);setValue('address.country',property.address.country||'USA');}else{// Use parsed fields from API\nsetValue('address.street',street);setValue('address.unit',unit);setValue('address.city',city);setValue('address.state',state);setValue('address.zipCode',zipCode);setValue('address.country','USA');}setValue('type',property.type||'apartment');setValue('bedrooms',property.bedrooms||0);setValue('bathrooms',property.bathrooms||0);setValue('squareFeet',property.squareFeet||property.square_feet||0);setValue('rentAmount',property.rentAmount||property.rent_amount||0);setValue('deposit',property.deposit||0);setValue('description',property.description||'');setAmenities(property.amenities||[]);}else{// Reset form for new property\nreset();setAmenities([]);}},[property,setValue,reset]);const handleFormSubmit=async data=>{const formData={...data,amenities,...(property&&{id:property.id})};await onSubmit(formData);};const addAmenity=()=>{if(newAmenity.trim()&&!amenities.includes(newAmenity.trim())){setAmenities([...amenities,newAmenity.trim()]);setNewAmenity('');}};const removeAmenity=index=>{setAmenities(amenities.filter((_,i)=>i!==index));};const handleKeyPress=e=>{if(e.key==='Enter'){e.preventDefault();addAmenity();}};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\",onClick:onClose}),/*#__PURE__*/_jsx(\"div\",{className:\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handleFormSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900\",children:property?'Edit Property':'Add New Property'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900 mb-3\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Property Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('name',{required:'Property name is required'}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"e.g., Sunset Apartments Unit 2A\"}),errors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.name.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Property Type *\"}),/*#__PURE__*/_jsxs(\"select\",{...register('type',{required:'Property type is required'}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"apartment\",children:\"Apartment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"house\",children:\"House\"}),/*#__PURE__*/_jsx(\"option\",{value:\"condo\",children:\"Condo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"townhouse\",children:\"Townhouse\"}),/*#__PURE__*/_jsx(\"option\",{value:\"studio\",children:\"Studio\"}),/*#__PURE__*/_jsx(\"option\",{value:\"commercial\",children:\"Commercial\"})]}),errors.type&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.type.message})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900 mb-3\",children:\"Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Street Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.street',{required:'Street address is required'}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"123 Main Street\"}),((_errors$address=errors.address)===null||_errors$address===void 0?void 0:_errors$address.street)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.street.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Unit/Apartment Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.unit'),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"Apt 2B, Unit 105, etc. (optional)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"City *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.city',{required:'City is required'}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"San Francisco\"}),((_errors$address2=errors.address)===null||_errors$address2===void 0?void 0:_errors$address2.city)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.city.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"State *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.state',{required:'State is required'}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"CA\"}),((_errors$address3=errors.address)===null||_errors$address3===void 0?void 0:_errors$address3.state)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.state.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"ZIP Code *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.zipCode',{required:'ZIP code is required'}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"94102\"}),((_errors$address4=errors.address)===null||_errors$address4===void 0?void 0:_errors$address4.zipCode)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.zipCode.message})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Country *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.country',{required:'Country is required'}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"United States\",defaultValue:\"United States\"}),((_errors$address5=errors.address)===null||_errors$address5===void 0?void 0:_errors$address5.country)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.country.message})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900 mb-3\",children:\"Property Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Bedrooms *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",...register('bedrooms',{required:'Number of bedrooms is required',min:{value:0,message:'Bedrooms cannot be negative'}}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\"}),errors.bedrooms&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.bedrooms.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Bathrooms *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.5\",...register('bathrooms',{required:'Number of bathrooms is required',min:{value:0,message:'Bathrooms cannot be negative'}}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\"}),errors.bathrooms&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.bathrooms.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Square Feet *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",...register('squareFeet',{required:'Square footage is required',min:{value:0,message:'Square feet cannot be negative'}}),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\"}),errors.squareFeet&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.squareFeet.message})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900 mb-3\",children:\"Financial Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Monthly Rent *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 relative rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 sm:text-sm\",children:\"$\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.01\",...register('rentAmount',{required:'Rent amount is required',min:{value:0,message:'Rent cannot be negative'}}),className:\"pl-7 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"0.00\"})]}),errors.rentAmount&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.rentAmount.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Security Deposit *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 relative rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 sm:text-sm\",children:\"$\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.01\",...register('deposit',{required:'Deposit amount is required',min:{value:0,message:'Deposit cannot be negative'}}),className:\"pl-7 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"0.00\"})]}),errors.deposit&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.deposit.message})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:4,...register('description'),className:\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"Describe the property, its features, and any special notes...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Amenities\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newAmenity,onChange:e=>setNewAmenity(e.target.value),onKeyPress:handleKeyPress,className:\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"Add amenity (e.g., Pool, Gym, Parking)\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addAmenity,className:\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\",children:/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4\"})})]}),amenities.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:amenities.map((amenity,index)=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800\",children:[amenity,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeAmenity(index),className:\"ml-2 text-green-600 hover:text-green-800\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-3 w-3\"})})]},index))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?'Saving...':property?'Update Property':'Create Property'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\",children:\"Cancel\"})]})]})})]})});};export default PropertyForm;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}