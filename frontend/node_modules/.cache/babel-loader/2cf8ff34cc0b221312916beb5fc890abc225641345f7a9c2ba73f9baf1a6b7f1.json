{"ast":null,"code":"import React,{useState}from'react';import Modal from'../Common/Modal';import{useForm}from'react-hook-form';import{CalendarIcon,ExclamationTriangleIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LeaseTerminationModal=_ref=>{let{isOpen,onClose,lease,onSubmit}=_ref;const[isSubmitting,setIsSubmitting]=useState(false);const{register,handleSubmit,watch,setValue,formState:{errors}}=useForm();const currentRent=lease.monthlyRent||lease.rent_amount||0;const currentDeposit=lease.securityDeposit||lease.security_deposit||0;const watchedConfirm=watch('confirmTermination',false);// Set default values\nReact.useEffect(()=>{const today=new Date();setValue('terminationDate',today.toISOString().split('T')[0]);setValue('securityDepositReturn',currentDeposit);setValue('finalRentAmount',0);setValue('noticeGiven',false);setValue('confirmTermination',false);},[lease,setValue,currentDeposit]);const onFormSubmit=async data=>{try{setIsSubmitting(true);await onSubmit(data);toast.success('Lease termination processed successfully!');onClose();}catch(error){toast.error('Failed to process lease termination');}finally{setIsSubmitting(false);}};const tenantName=lease.tenant_name||'Unknown Tenant';const propertyName=lease.property_name||'Unknown Property';return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,title:\"Terminate Lease\",maxWidth:\"2xl\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onFormSubmit),className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-5 w-5 text-red-400 mr-3 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800\",children:\"Warning: Lease Termination\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-700\",children:\"This action will terminate the lease agreement. Please ensure you have followed all legal requirements and given proper notice to the tenant.\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Current Lease\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-500\",children:\"Tenant:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:tenantName})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-500\",children:\"Property:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:propertyName})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-500\",children:\"Monthly Rent:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-900\",children:[\"$\",currentRent.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-500\",children:\"Security Deposit:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-900\",children:[\"$\",currentDeposit.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-500\",children:\"Original End Date:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:lease.endDate||lease.end_date?new Date(lease.endDate||lease.end_date||'').toLocaleDateString():'N/A'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Termination Details\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"terminationDate\",className:\"block text-sm font-medium text-gray-700\",children:\"Termination Date *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 relative\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"absolute left-3 top-3 h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"terminationDate\",...register('terminationDate',{required:'Termination date is required'}),className:\"pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500\"})]}),errors.terminationDate&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.terminationDate.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"terminationReason\",className:\"block text-sm font-medium text-gray-700\",children:\"Reason for Termination *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"terminationReason\",...register('terminationReason',{required:'Reason is required'}),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a reason\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lease_violation\",children:\"Lease Violation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"non_payment\",children:\"Non-Payment of Rent\"}),/*#__PURE__*/_jsx(\"option\",{value:\"property_damage\",children:\"Property Damage\"}),/*#__PURE__*/_jsx(\"option\",{value:\"illegal_activity\",children:\"Illegal Activity\"}),/*#__PURE__*/_jsx(\"option\",{value:\"landlord_needs\",children:\"Landlord Needs Property\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mutual_agreement\",children:\"Mutual Agreement\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tenant_request\",children:\"Tenant Request\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]}),errors.terminationReason&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.terminationReason.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"noticeGiven\",type:\"checkbox\",...register('noticeGiven',{required:'You must confirm proper notice was given'}),className:\"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"noticeGiven\",className:\"ml-2 block text-sm text-gray-900\",children:\"Proper legal notice has been given to the tenant *\"})]}),errors.noticeGiven&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.noticeGiven.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Financial Settlement\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"securityDepositReturn\",className:\"block text-sm font-medium text-gray-700\",children:\"Security Deposit Return ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"securityDepositReturn\",step:\"0.01\",...register('securityDepositReturn',{required:'Security deposit return amount is required',min:{value:0,message:'Amount cannot be negative'},max:{value:currentDeposit,message:`Cannot exceed original deposit of $${currentDeposit}`}}),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500\"}),errors.securityDepositReturn&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.securityDepositReturn.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"finalRentAmount\",className:\"block text-sm font-medium text-gray-700\",children:\"Final Rent Amount Owed ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"finalRentAmount\",step:\"0.01\",...register('finalRentAmount',{min:{value:0,message:'Amount cannot be negative'}}),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500\"}),errors.finalRentAmount&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.finalRentAmount.message})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"notes\",className:\"block text-sm font-medium text-gray-700\",children:\"Additional Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"notes\",rows:3,...register('notes'),placeholder:\"Any additional notes about the termination...\",className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"confirmTermination\",type:\"checkbox\",...register('confirmTermination',{required:'You must confirm termination'}),className:\"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmTermination\",className:\"ml-2 block text-sm font-medium text-red-900\",children:\"I confirm that I want to terminate this lease agreement. This action cannot be undone.\"})]}),errors.confirmTermination&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.confirmTermination.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting||!watchedConfirm,className:\"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50\",children:isSubmitting?'Processing...':'Terminate Lease'})]})]})});};export default LeaseTerminationModal;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}