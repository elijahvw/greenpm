{"ast":null,"code":"import React,{useState,useEffect}from'react';import{reportsService}from'../services/reportsService';import{DocumentChartBarIcon,PlusIcon,ArrowDownTrayIcon,CalendarDaysIcon,ChartBarIcon,DocumentTextIcon,CurrencyDollarIcon,HomeIcon,UserGroupIcon,WrenchScrewdriverIcon,BuildingOfficeIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Reports=()=>{const[reports,setReports]=useState([]);const[templates,setTemplates]=useState([]);const[analytics,setAnalytics]=useState(null);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('reports');const[dateRange,setDateRange]=useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split('T')[0],endDate:new Date().toISOString().split('T')[0]});useEffect(()=>{fetchData();},[dateRange]);const fetchData=async()=>{try{setLoading(true);const[reportsData,templatesData,analyticsData]=await Promise.all([reportsService.getReports(),reportsService.getReportTemplates(),reportsService.getAnalyticsDashboard(dateRange.startDate,dateRange.endDate)]);setReports(reportsData);setTemplates(templatesData);setAnalytics(analyticsData);}catch(error){console.error('Error fetching reports data:',error);toast.error('Failed to load reports data');}finally{setLoading(false);}};const handleGenerateReport=async type=>{try{let report;switch(type){case'financial':report=await reportsService.generateFinancialReport(dateRange.startDate,dateRange.endDate);break;case'occupancy':report=await reportsService.generateOccupancyReport(dateRange.startDate,dateRange.endDate);break;case'maintenance':report=await reportsService.generateMaintenanceReport(dateRange.startDate,dateRange.endDate);break;case'tenant':report=await reportsService.generateTenantReport(dateRange.startDate,dateRange.endDate);break;case'property':report=await reportsService.generatePropertyReport(dateRange.startDate,dateRange.endDate);break;default:throw new Error('Unknown report type');}setReports([report,...reports]);toast.success('Report generated successfully');}catch(error){console.error('Error generating report:',error);toast.error('Failed to generate report');}};const handleDownloadReport=async reportId=>{try{const blob=await reportsService.downloadReport(reportId);const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`report-${reportId}.pdf`;document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);toast.success('Report downloaded successfully');}catch(error){console.error('Error downloading report:',error);toast.error('Failed to download report');}};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(amount);};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString();};const getReportIcon=type=>{switch(type){case'financial':return CurrencyDollarIcon;case'occupancy':return HomeIcon;case'maintenance':return WrenchScrewdriverIcon;case'tenant':return UserGroupIcon;case'property':return BuildingOfficeIcon;default:return DocumentTextIcon;}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex md:items-center md:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight\",children:\"Reports & Analytics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Generate insights and reports for your rental properties\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex space-x-3 md:ml-4 md:mt-0\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>console.log('Schedule report'),className:\"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(CalendarDaysIcon,{className:\"h-4 w-4 mr-2\"}),\"Schedule\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>console.log('Create custom report'),className:\"inline-flex items-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Custom Report\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CalendarDaysIcon,{className:\"h-5 w-5 text-gray-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Date Range:\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dateRange.startDate,onChange:e=>setDateRange(prev=>({...prev,startDate:e.target.value})),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"to\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dateRange.endDate,onChange:e=>setDateRange(prev=>({...prev,endDate:e.target.value})),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"-mb-px flex space-x-8\",children:[{id:'reports',name:'Reports',icon:DocumentChartBarIcon},{id:'analytics',name:'Analytics',icon:ChartBarIcon},{id:'templates',name:'Templates',icon:DocumentTextIcon}].map(tab=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:`${activeTab===tab.id?'border-green-500 text-green-600':'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'} flex items-center whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium`,children:[/*#__PURE__*/_jsx(tab.icon,{className:\"h-5 w-5 mr-2\"}),tab.name]},tab.id))})}),activeTab==='reports'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Generate Reports\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5\",children:[{type:'financial',name:'Financial Report',icon:CurrencyDollarIcon,color:'green'},{type:'occupancy',name:'Occupancy Report',icon:HomeIcon,color:'blue'},{type:'maintenance',name:'Maintenance Report',icon:WrenchScrewdriverIcon,color:'orange'},{type:'tenant',name:'Tenant Report',icon:UserGroupIcon,color:'purple'},{type:'property',name:'Property Report',icon:BuildingOfficeIcon,color:'indigo'}].map(report=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleGenerateReport(report.type),className:`p-4 border-2 border-dashed border-${report.color}-300 rounded-lg hover:border-${report.color}-400 hover:bg-${report.color}-50 transition-colors`,children:[/*#__PURE__*/_jsx(report.icon,{className:`h-8 w-8 text-${report.color}-600 mx-auto mb-2`}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:report.name})]},report.type))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900 mb-4\",children:\"Recent Reports\"}),reports.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(DocumentChartBarIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No reports generated\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Generate your first report using the options above.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:reports.map(report=>{const IconComponent=getReportIcon(report.type);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(IconComponent,{className:\"h-8 w-8 text-gray-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900\",children:report.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[report.type.charAt(0).toUpperCase()+report.type.slice(1),\" \\u2022\",formatDate(report.period.startDate),\" - \",formatDate(report.period.endDate)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-400\",children:[\"Generated on \",formatDate(report.generatedAt)]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDownloadReport(report.id),className:\"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(ArrowDownTrayIcon,{className:\"h-4 w-4 mr-1\"}),\"Download\"]})})]},report.id);})})]})})]}),activeTab==='analytics'&&analytics&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-6 w-6 text-green-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Net Income\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:formatCurrency(analytics.overview.netIncome)})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(HomeIcon,{className:\"h-6 w-6 text-blue-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Occupancy Rate\"}),/*#__PURE__*/_jsxs(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:[analytics.overview.occupancyRate.toFixed(1),\"%\"]})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-6 w-6 text-purple-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Total Tenants\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:analytics.overview.totalTenants})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(WrenchScrewdriverIcon,{className:\"h-6 w-6 text-orange-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Maintenance Requests\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:analytics.overview.maintenanceRequests})]})})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Performance Trends\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 text-gray-500\",children:\"Charts and visualizations will be implemented here\"})]})]}),activeTab==='templates'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Report Templates\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Create and manage custom report templates for recurring reports.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>console.log('Create template'),className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Create Template\"]})})]})})]});};export default Reports;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}