{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useSearchParams,useNavigate}from'react-router-dom';import{leaseService}from'../services/leaseService';import{securityDepositService}from'../services/securityDepositService';import{propertyService}from'../services/propertyService';import LeaseCard from'../components/Leases/LeaseCard';import LeaseViewModal from'../components/Leases/LeaseViewModal';import LeaseRenewalModal from'../components/Leases/LeaseRenewalModal';import LeaseTerminationModal from'../components/Leases/LeaseTerminationModal';import LeaseEditModal from'../components/Leases/LeaseEditModal';import{PlusIcon,MagnifyingGlassIcon,DocumentTextIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Leases=()=>{const[searchParams]=useSearchParams();const navigate=useNavigate();const[leases,setLeases]=useState([]);const[properties,setProperties]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[statusFilter,setStatusFilter]=useState('all');const[typeFilter,setTypeFilter]=useState('all');const[propertyFilter,setPropertyFilter]=useState(searchParams.get('propertyId')||'all');// Modal states\nconst[viewingLease,setViewingLease]=useState();const[isViewModalOpen,setIsViewModalOpen]=useState(false);const[editingLease,setEditingLease]=useState();const[isEditModalOpen,setIsEditModalOpen]=useState(false);const[renewingLease,setRenewingLease]=useState();const[isRenewalModalOpen,setIsRenewalModalOpen]=useState(false);const[terminatingLease,setTerminatingLease]=useState();const[isTerminationModalOpen,setIsTerminationModalOpen]=useState(false);useEffect(()=>{fetchLeases();fetchProperties();},[]);// Refresh leases when the component becomes visible (e.g., after navigation)\nuseEffect(()=>{const handleVisibilityChange=()=>{if(!document.hidden){console.log('ðŸ”„ Page became visible, refreshing leases...');fetchLeases();}};document.addEventListener('visibilitychange',handleVisibilityChange);return()=>document.removeEventListener('visibilitychange',handleVisibilityChange);},[]);// Refresh leases when returning from other pages\nuseEffect(()=>{const handleFocus=()=>{console.log('ðŸ”„ Window focused, refreshing leases...');fetchLeases();};window.addEventListener('focus',handleFocus);return()=>window.removeEventListener('focus',handleFocus);},[]);// Handle URL parameters for property filtering\nuseEffect(()=>{const propertyId=searchParams.get('propertyId');if(propertyId){setPropertyFilter(propertyId);}},[searchParams]);const fetchProperties=async()=>{try{const data=await propertyService.getProperties();setProperties(data);}catch(error){console.error('Error fetching properties:',error);}};const fetchLeases=async()=>{try{setLoading(true);console.log('ðŸ“ Leases - Fetching leases...');const data=await leaseService.getLeases();console.log('ðŸ“ Leases - Fetched data:',data);setLeases(data);console.log('ðŸ“ Leases - Set leases state:',data);}catch(error){console.error('âŒ Leases - Error fetching leases:',error);toast.error('Failed to load leases');}finally{setLoading(false);}};const handleDeleteLease=async leaseId=>{if(!window.confirm('Are you sure you want to delete this lease? This action cannot be undone.')){return;}try{await leaseService.deleteLease(leaseId);setLeases(leases.filter(l=>l.id!==leaseId));toast.success('Lease deleted successfully');}catch(error){console.error('Error deleting lease:',error);toast.error('Failed to delete lease');}};const handleEditLease=lease=>{setEditingLease(lease);setIsEditModalOpen(true);};const handleViewLease=lease=>{setViewingLease(lease);setIsViewModalOpen(true);};const handleRenewLease=lease=>{setRenewingLease(lease);setIsRenewalModalOpen(true);};const handleTerminateLease=lease=>{setTerminatingLease(lease);setIsTerminationModalOpen(true);};// Modal handlers\nconst handleRenewalSubmit=async data=>{try{if(!renewingLease)return;// Create a new lease based on renewal data\nconst newLeaseData={propertyId:renewingLease.property_id||renewingLease.propertyId||'',tenantId:renewingLease.tenant_id||renewingLease.tenantId||'',startDate:data.newStartDate,endDate:data.newEndDate,monthlyRent:data.newMonthlyRent,securityDeposit:data.newSecurityDeposit,leaseType:data.renewalType,lateFeePenalty:renewingLease.late_fee_penalty||renewingLease.lateFeePenalty||0,gracePeriodDays:5,// Default grace period\nrenewalOption:true,petPolicy:{allowed:false,deposit:0,monthlyFee:0,restrictions:''},utilitiesIncluded:[],tenantResponsibilities:['Regular cleaning','Minor maintenance'],landlordResponsibilities:['Major repairs','Property maintenance'],specialTerms:data.notes,notes:`Renewed lease from ${renewingLease.id} on ${new Date().toLocaleDateString()}`};// Create the new lease\nawait leaseService.createLease(newLeaseData);// Update the old lease status to 'renewed'\nif(renewingLease.id){try{await leaseService.updateLease({id:renewingLease.id,status:'expired',notes:`Renewed on ${new Date().toLocaleDateString()}. ${data.notes||''}`});}catch(updateError){console.warn('Could not update old lease status:',updateError);// Don't throw - the new lease was created successfully\n}}toast.success('Lease renewal created successfully!');// Refresh leases to show the new one\nfetchLeases();// Close the modal\nsetIsRenewalModalOpen(false);setRenewingLease(undefined);}catch(error){console.error('Error creating lease renewal:',error);toast.error('Failed to create lease renewal');throw error;}};const handleTerminationSubmit=async data=>{try{if(!terminatingLease)return;// Update the lease status to terminated\nconst terminationData={id:terminatingLease.id,status:'terminated',endDate:data.terminationDate,// Update end date to termination date\nnotes:`Terminated on ${new Date(data.terminationDate).toLocaleDateString()}. Reason: ${data.terminationReason}. Security deposit return: $${data.securityDepositReturn}. Final rent: $${data.finalRentAmount}. ${data.notes||''}`};await leaseService.updateLease(terminationData);toast.success('Lease terminated successfully!');// Refresh leases to show the updated status\nfetchLeases();// Close the modal\nsetIsTerminationModalOpen(false);setTerminatingLease(undefined);}catch(error){console.error('Error terminating lease:',error);toast.error('Failed to terminate lease');throw error;}};// Handle lease edit submission\nconst handleEditSubmit=async data=>{try{console.log('ðŸ“‹ Leases page - Updating lease with data:',data);const result=await leaseService.updateLease(data);console.log('âœ… Leases page - Update result:',result);// Update the lease in the local state immediately for instant UI feedback\nsetLeases(prevLeases=>prevLeases.map(lease=>lease.id===data.id?{...lease,...result,updated_at:new Date().toISOString()}:lease));toast.success('Lease updated successfully!');// Also refresh from server to ensure consistency\nsetTimeout(()=>{fetchLeases();},500);console.log('ðŸ”„ Leases page - Local state updated and refresh scheduled');// Close the modal\nsetIsEditModalOpen(false);setEditingLease(undefined);}catch(error){var _error$response,_error$response$data;console.error('âŒ Leases page - Error updating lease:',error);// Extract error message from API response\nlet errorMessage='Failed to update lease';if(error!==null&&error!==void 0&&(_error$response=error.response)!==null&&_error$response!==void 0&&(_error$response$data=_error$response.data)!==null&&_error$response$data!==void 0&&_error$response$data.detail){errorMessage=error.response.data.detail;}else if(error!==null&&error!==void 0&&error.message){errorMessage=error.message;}toast.error(errorMessage);throw error;}};const openCreateForm=()=>{navigate('/dashboard/leases/create');};const handleCreateSubmit=async data=>{try{console.log('ðŸ“‹ Leases page - Creating lease with data:',data);const result=await leaseService.createLease(data);console.log('âœ… Leases page - Create result:',result);// Automatically create a security deposit record if security deposit amount > 0\nif(data.securityDeposit&&data.securityDeposit>0){try{const depositData={leaseId:result.id,tenantId:data.tenantId,propertyId:data.propertyId,amount:data.securityDeposit,dateReceived:data.startDate,// Default to lease start date\nbankAccount:'General Trust Account',// Default account\npaymentMethod:'check',// Default method\nreferenceNumber:`DEP-${result.id}-${Date.now()}`,notes:`Security deposit for lease ${result.id}`};console.log('ðŸ’° Creating security deposit:',depositData);await securityDepositService.createSecurityDeposit(depositData);console.log('âœ… Security deposit created successfully');toast.success('Lease created successfully with security deposit tracked!');}catch(depositError){console.error('âš ï¸ Failed to create security deposit record:',depositError);toast.success('Lease created successfully, but failed to create security deposit record');}}else{toast.success('Lease created successfully!');}// Refresh leases to show the new lease\nawait fetchLeases();console.log('ðŸ”„ Leases page - Leases refreshed');}catch(error){var _error$response2,_error$response2$data;console.error('âŒ Leases page - Error creating lease:',error);// Extract error message from API response\nlet errorMessage='Failed to create lease';if(error!==null&&error!==void 0&&(_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.detail){errorMessage=error.response.data.detail;}else if(error!==null&&error!==void 0&&error.message){errorMessage=error.message;}toast.error(errorMessage);throw error;}};// Filter leases based on search and filters\nconst filteredLeases=leases.filter(lease=>{const tenantName=lease.tenant_name||(lease.tenant?`${lease.tenant.firstName} ${lease.tenant.lastName}`:'');const propertyName=lease.property_name||(lease.property?lease.property.name:'');const matchesSearch=tenantName.toLowerCase().includes(searchTerm.toLowerCase())||propertyName.toLowerCase().includes(searchTerm.toLowerCase())||lease.id.toLowerCase().includes(searchTerm.toLowerCase());const matchesStatus=statusFilter==='all'||(lease.status||'active')===statusFilter;const matchesType=typeFilter==='all'||(lease.leaseType||lease.lease_type||'fixed')===typeFilter;const matchesProperty=propertyFilter==='all'||(lease.propertyId||lease.property_id)===propertyFilter;return matchesSearch&&matchesStatus&&matchesType&&matchesProperty;});const getStatusCounts=()=>{return{all:leases.length,active:leases.filter(l=>l.status==='active').length,expired:leases.filter(l=>l.status==='expired').length,terminated:leases.filter(l=>l.status==='terminated').length,pending:leases.filter(l=>l.status==='pending').length,draft:leases.filter(l=>l.status==='draft').length};};const getExpiringLeases=()=>{const today=new Date();const thirtyDaysFromNow=new Date(today.getTime()+30*24*60*60*1000);return leases.filter(lease=>{const endDateStr=lease.endDate||lease.end_date;if(!endDateStr)return false;const endDate=new Date(endDateStr);return lease.status==='active'&&endDate<=thirtyDaysFromNow&&endDate>today;});};const statusCounts=getStatusCounts();const expiringLeases=getExpiringLeases();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex md:items-center md:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight\",children:\"Leases\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Manage your rental leases and agreements\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex md:ml-4 md:mt-0\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:openCreateForm,className:\"inline-flex items-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Create Lease\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-5 w-5 text-blue-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Total Leases\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:statusCounts.all})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 font-semibold text-sm\",children:\"AC\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Active\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:statusCounts.active})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600 font-semibold text-sm\",children:\"EX\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Expiring Soon\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:expiringLeases.length})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 font-semibold text-sm\",children:\"EP\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Expired\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:statusCounts.expired})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-yellow-600 font-semibold text-sm\",children:\"PD\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:statusCounts.pending})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 font-semibold text-sm\",children:\"DR\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Drafts\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:statusCounts.draft})]})})]})})})]}),expiringLeases.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-50 border border-orange-200 rounded-md p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-orange-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-medium text-orange-800\",children:[expiringLeases.length,\" lease\",expiringLeases.length>1?'s':'',\" expiring soon\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-orange-700\",children:\"Review and renew leases that are expiring within the next 30 days.\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search leases...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expired\",children:\"Expired\"}),/*#__PURE__*/_jsx(\"option\",{value:\"terminated\",children:\"Terminated\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"draft\",children:\"Draft\"})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{value:typeFilter,onChange:e=>setTypeFilter(e.target.value),className:\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Types\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fixed\",children:\"Fixed Term\"}),/*#__PURE__*/_jsx(\"option\",{value:\"month-to-month\",children:\"Month-to-Month\"}),/*#__PURE__*/_jsx(\"option\",{value:\"yearly\",children:\"Yearly\"})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{value:propertyFilter,onChange:e=>setPropertyFilter(e.target.value),className:\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Properties\"}),properties.map(property=>/*#__PURE__*/_jsxs(\"option\",{value:property.id,children:[property.name||property.title,\" - \",typeof property.address==='string'?property.address:property.address?`${property.address.street}, ${property.address.city}`:`${property.street||property.address_line1||''}, ${property.city||''}`]},property.id))]})})]})}),filteredLeases.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No leases found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:leases.length===0?\"Get started by creating your first lease.\":\"Try adjusting your search or filter criteria.\"}),leases.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:openCreateForm,className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Create Lease\"]})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\",children:filteredLeases.map(lease=>/*#__PURE__*/_jsx(LeaseCard,{lease:lease,onEdit:handleEditLease,onDelete:handleDeleteLease,onView:handleViewLease,onRenew:handleRenewLease,onTerminate:handleTerminateLease},lease.id))}),viewingLease&&/*#__PURE__*/_jsx(LeaseViewModal,{isOpen:isViewModalOpen,onClose:()=>{setIsViewModalOpen(false);setViewingLease(undefined);},lease:viewingLease,onEdit:handleEditLease,onRenew:handleRenewLease,onTerminate:handleTerminateLease,onViewProperty:propertyId=>{console.log('Navigate to property:',propertyId);// TODO: Navigate to property details\ntoast('Property navigation will be implemented soon!');},onViewTenant:tenantId=>{console.log('Navigate to tenant:',tenantId);// TODO: Navigate to tenant details\ntoast('Tenant navigation will be implemented soon!');}}),editingLease&&/*#__PURE__*/_jsx(LeaseEditModal,{isOpen:isEditModalOpen,onClose:()=>{setIsEditModalOpen(false);setEditingLease(undefined);},lease:editingLease,onSubmit:handleEditSubmit}),renewingLease&&/*#__PURE__*/_jsx(LeaseRenewalModal,{isOpen:isRenewalModalOpen,onClose:()=>{setIsRenewalModalOpen(false);setRenewingLease(undefined);},lease:renewingLease,onSubmit:handleRenewalSubmit}),terminatingLease&&/*#__PURE__*/_jsx(LeaseTerminationModal,{isOpen:isTerminationModalOpen,onClose:()=>{setIsTerminationModalOpen(false);setTerminatingLease(undefined);},lease:terminatingLease,onSubmit:handleTerminationSubmit})]});};export default Leases;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}