{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../../contexts/AuthContext';import{leaseService}from'../../services/leaseService';import{DocumentTextIcon,CalendarIcon,CurrencyDollarIcon,HomeIcon,ClockIcon,UserIcon,ExclamationTriangleIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyLease=()=>{const{user}=useAuth();const[currentLease,setCurrentLease]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{fetchCurrentLease();},[]);const fetchCurrentLease=async()=>{try{const leases=await leaseService.getLeases();const activeLease=leases.find(lease=>lease.status==='active'&&lease.tenant_email===(user===null||user===void 0?void 0:user.email));setCurrentLease(activeLease||null);}catch(error){console.error('Error fetching lease:',error);toast.error('Failed to load lease information');}finally{setLoading(false);}};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});};const getDaysUntilExpiry=()=>{if(!(currentLease!==null&&currentLease!==void 0&&currentLease.end_date))return 0;const today=new Date();const endDate=new Date(currentLease.end_date);const diffTime=endDate.getTime()-today.getTime();return Math.ceil(diffTime/(1000*60*60*24));};const daysUntilExpiry=getDaysUntilExpiry();const isExpiringSoon=daysUntilExpiry<=60&&daysUntilExpiry>0;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600\"})});}if(!currentLease){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-6 w-6 text-yellow-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-yellow-800\",children:\"No Active Lease\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-yellow-700\",children:\"You don't currently have an active lease. Please contact your landlord for assistance.\"})]})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-5 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-8 w-8 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"My Lease Agreement\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"View your current lease details\"})]})]})})}),isExpiringSoon&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-50 border border-orange-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-5 w-5 text-orange-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-orange-800\",children:\"Lease Expiring Soon\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-orange-700\",children:[\"Your lease expires in \",daysUntilExpiry,\" days. Contact your landlord to discuss renewal options.\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Property Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(HomeIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Property\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-900\",children:currentLease.property_name||'Property Name'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Landlord\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-900\",children:\"Contact via Messages\"})]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Lease Terms\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-900\",children:formatDate(currentLease.start_date||currentLease.startDate||'')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"End Date\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-900\",children:formatDate(currentLease.end_date||currentLease.endDate||'')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Lease Type\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-900 capitalize\",children:currentLease.lease_type||currentLease.leaseType||'Fixed'})]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Financial Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Monthly Rent\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-600\",children:[\"$\",(currentLease.rent_amount||currentLease.monthlyRent||0).toLocaleString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Security Deposit\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-semibold text-gray-900\",children:[\"$\",(currentLease.security_deposit||currentLease.securityDeposit||0).toLocaleString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Late Fee\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-semibold text-gray-900\",children:[\"$\",(currentLease.late_fee_penalty||currentLease.lateFeePenalty||0).toLocaleString()]})]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Additional Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-green-600 font-semibold capitalize\",children:currentLease.status})]}),currentLease.notes&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:currentLease.notes})]})]})]})})]});};export default MyLease;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}