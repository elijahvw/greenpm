{"ast":null,"code":"import React,{useState,useEffect}from'react';import{leaseService}from'../../services/leaseService';import Modal from'../Common/Modal';import{MapPinIcon,HomeIcon,CurrencyDollarIcon,CalendarIcon,TagIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PropertyViewModal=_ref=>{let{isOpen,onClose,property,onViewLeases,onEdit}=_ref;const[activeLease,setActiveLease]=useState(null);const[loadingLease,setLoadingLease]=useState(false);useEffect(()=>{if(isOpen&&property!==null&&property!==void 0&&property.id){fetchActiveLease(property.id);}},[isOpen,property===null||property===void 0?void 0:property.id]);const fetchActiveLease=async propertyId=>{try{setLoadingLease(true);const allLeases=await leaseService.getLeases();// Find active lease for this property\nconst activeLeaseForProperty=allLeases.find(lease=>(lease.propertyId===propertyId||lease.property_id===propertyId)&&(lease.status==='active'||!lease.status)// Default to active if no status\n);setActiveLease(activeLeaseForProperty||null);}catch(error){console.error('Error fetching active lease:',error);setActiveLease(null);}finally{setLoadingLease(false);}};const formatAddress=address=>{if(typeof address==='string'){return address;}return`${address.street}, ${address.city}, ${address.state} ${address.zipCode}`;};const rentAmount=property.rentAmount||property.rent_amount||0;const squareFeet=property.squareFeet||property.square_feet||0;return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,title:\"Property Details\",maxWidth:\"2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-2\",children:property.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 mb-2\",children:[/*#__PURE__*/_jsx(MapPinIcon,{className:\"h-5 w-5 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:formatAddress(property.address)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800\",children:[/*#__PURE__*/_jsx(TagIcon,{className:\"h-4 w-4 mr-1\"}),property.status?property.status.charAt(0).toUpperCase()+property.status.slice(1):'Available']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(HomeIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-500\",children:\"Property Type\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900 capitalize\",children:property.type})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-5 w-5 text-gray-400 mr-3 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold\",children:\"BR\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-500\",children:\"Bedrooms\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:property.bedrooms})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-5 w-5 text-gray-400 mr-3 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold\",children:\"BA\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-500\",children:\"Bathrooms\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:property.bathrooms})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-5 w-5 text-gray-400 mr-3 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold\",children:\"SF\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-500\",children:\"Square Feet\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-900\",children:[squareFeet.toLocaleString(),\" sq ft\"]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2\",children:\"Financial Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-500\",children:\"Monthly Rent\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-bold text-green-600\",children:[\"$\",rentAmount.toLocaleString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-500\",children:\"Security Deposit\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-900\",children:[\"$\",(property.deposit||0).toLocaleString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-500\",children:\"Created\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:property.createdAt||property.created_at?new Date(property.createdAt||property.created_at||'').toLocaleDateString():'Unknown'})]})]})]})]})]}),property.description&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700 leading-relaxed\",children:property.description})]}),property.amenities&&property.amenities.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2\",children:\"Amenities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:property.amenities.map((amenity,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",children:amenity},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Current Lease\"}),onViewLeases&&property.id&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewLeases(property.id),className:\"text-sm text-blue-600 hover:text-blue-800 font-medium\",children:\"View All Leases \\u2192\"})]}),loadingLease?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm text-gray-600\",children:\"Loading lease...\"})]}):activeLease?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"Tenant:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:activeLease.tenant_name||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"Monthly Rent:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"$\",(activeLease.monthlyRent||activeLease.rent_amount||0).toLocaleString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"Start Date:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:new Date(activeLease.startDate||activeLease.start_date||'').toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"End Date:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:new Date(activeLease.endDate||activeLease.end_date||'').toLocaleDateString()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-2 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:\"Active Lease\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"Lease ID: #\",activeLease.id]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-2\",children:\"No active lease for this property\"}),/*#__PURE__*/_jsx(\"div\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800\",children:\"Available\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4 border-t border-gray-200\",children:[onViewLeases&&property.id&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\",onClick:()=>onViewLeases(property.id),children:\"View Leases\"}),onEdit&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\",onClick:()=>onEdit(property),children:\"Edit Property\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\",onClick:onClose,children:\"Close\"})]})]})});};export default PropertyViewModal;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}