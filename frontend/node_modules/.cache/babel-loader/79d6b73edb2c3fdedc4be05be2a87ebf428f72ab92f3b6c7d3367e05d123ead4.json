{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{tenantService}from'../services/tenantService';import{leaseService}from'../services/leaseService';import TenantEditModal from'../components/Tenants/TenantEditModal';import toast from'react-hot-toast';import{ArrowLeftIcon,UserIcon,EnvelopeIcon,PhoneIcon,MapPinIcon,BriefcaseIcon,CurrencyDollarIcon,CalendarIcon,DocumentTextIcon,PencilIcon,HomeIcon,BanknotesIcon,ExclamationTriangleIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TenantDetail=()=>{const{tenantId}=useParams();const navigate=useNavigate();const[tenant,setTenant]=useState(null);const[leases,setLeases]=useState([]);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('overview');const[isEditModalOpen,setIsEditModalOpen]=useState(false);useEffect(()=>{if(tenantId){fetchTenantData();}},[tenantId]);const fetchTenantData=async()=>{try{setLoading(true);// Fetch tenant details\nconst tenantData=await tenantService.getTenant(tenantId);setTenant(tenantData);// Fetch tenant's leases\nconst leasesData=await leaseService.getLeases();const tenantLeases=leasesData.filter(lease=>lease.tenant_id===tenantId||lease.tenantId===tenantId);setLeases(tenantLeases);}catch(error){console.error('Error fetching tenant data:',error);toast.error('Failed to load tenant details');}finally{setLoading(false);}};const handleEditSubmit=async data=>{try{if(!(tenant!==null&&tenant!==void 0&&tenant.id))return;await tenantService.updateTenant(data);toast.success('Tenant updated successfully!');// Refresh tenant data\nawait fetchTenantData();setIsEditModalOpen(false);}catch(error){console.error('Error updating tenant:',error);toast.error('Failed to update tenant');throw error;}};const getStatusColor=status=>{switch(status===null||status===void 0?void 0:status.toLowerCase()){case'active':return'bg-green-100 text-green-800';case'inactive':return'bg-gray-100 text-gray-800';case'pending':return'bg-yellow-100 text-yellow-800';case'evicted':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const getLeaseStatusColor=status=>{switch(status===null||status===void 0?void 0:status.toLowerCase()){case'active':return'bg-green-100 text-green-800';case'pending':return'bg-yellow-100 text-yellow-800';case'expired':return'bg-red-100 text-red-800';case'terminated':return'bg-gray-100 text-gray-800';default:return'bg-gray-100 text-gray-800';}};const formatPhoneNumber=phone=>{if(!phone)return'N/A';const cleaned=phone.replace(/\\D/g,'');const match=cleaned.match(/^(\\d{3})(\\d{3})(\\d{4})$/);if(match){return`(${match[1]}) ${match[2]}-${match[3]}`;}return phone;};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(amount);};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600\"})});}if(!tenant){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Tenant not found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"The tenant you're looking for doesn't exist.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/dashboard/tenants'),className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700\",children:[/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-4 w-4 mr-2\"}),\"Back to Tenants\"]})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard/tenants'),className:\"mr-4 p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100\",children:/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-12 bg-gray-200 rounded-full flex items-center justify-center mr-4\",children:/*#__PURE__*/_jsx(UserIcon,{className:\"h-6 w-6 text-gray-500\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:[tenant.firstName,\" \",tenant.lastName]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(tenant.status||'active')}`,children:tenant.status?tenant.status.charAt(0).toUpperCase()+tenant.status.slice(1):'Active'}),tenant.moveInDate&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-3 text-sm text-gray-500\",children:[\"Moved in \",formatDate(tenant.moveInDate)]})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-3\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsEditModalOpen(true),className:\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(PencilIcon,{className:\"h-4 w-4 mr-2\"}),\"Edit Tenant\"]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 mb-8\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"-mb-px flex space-x-8\",children:[{id:'overview',name:'Overview',icon:UserIcon},{id:'leases',name:'Leases',icon:HomeIcon},{id:'payments',name:'Payments',icon:BanknotesIcon},{id:'documents',name:'Documents',icon:DocumentTextIcon}].map(tab=>{const Icon=tab.icon;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:`${activeTab===tab.id?'border-green-500 text-green-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center`,children:[/*#__PURE__*/_jsx(Icon,{className:\"h-4 w-4 mr-2\"}),tab.name]},tab.id);})})}),activeTab==='overview'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Personal Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Email\"}),/*#__PURE__*/_jsxs(\"dd\",{className:\"mt-1 flex items-center text-sm text-gray-900\",children:[/*#__PURE__*/_jsx(EnvelopeIcon,{className:\"h-4 w-4 mr-2 text-gray-400\"}),tenant.email]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Phone\"}),/*#__PURE__*/_jsxs(\"dd\",{className:\"mt-1 flex items-center text-sm text-gray-900\",children:[/*#__PURE__*/_jsx(PhoneIcon,{className:\"h-4 w-4 mr-2 text-gray-400\"}),formatPhoneNumber(tenant.phone)]})]}),tenant.address&&/*#__PURE__*/_jsxs(\"div\",{className:\"sm:col-span-2\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Address\"}),/*#__PURE__*/_jsxs(\"dd\",{className:\"mt-1 flex items-center text-sm text-gray-900\",children:[/*#__PURE__*/_jsx(MapPinIcon,{className:\"h-4 w-4 mr-2 text-gray-400\"}),tenant.address.street&&`${tenant.address.street}, `,tenant.address.city&&`${tenant.address.city}, `,tenant.address.state&&`${tenant.address.state} `,tenant.address.zipCode]})]}),tenant.moveInDate&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Move-in Date\"}),/*#__PURE__*/_jsxs(\"dd\",{className:\"mt-1 flex items-center text-sm text-gray-900\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-4 w-4 mr-2 text-gray-400\"}),formatDate(tenant.moveInDate)]})]})]})]}),tenant.employment&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6 mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Employment Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Employer\"}),/*#__PURE__*/_jsxs(\"dd\",{className:\"mt-1 flex items-center text-sm text-gray-900\",children:[/*#__PURE__*/_jsx(BriefcaseIcon,{className:\"h-4 w-4 mr-2 text-gray-400\"}),tenant.employment.employer]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Position\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"mt-1 text-sm text-gray-900\",children:tenant.employment.position})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Monthly Income\"}),/*#__PURE__*/_jsxs(\"dd\",{className:\"mt-1 flex items-center text-sm text-gray-900\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-4 w-4 mr-2 text-gray-400\"}),formatCurrency(tenant.employment.monthlyIncome||0)]})]})]})]}),tenant.notes&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6 mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:tenant.notes})]})]}),/*#__PURE__*/_jsx(\"div\",{children:tenant.emergencyContact&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Emergency Contact\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Name\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"mt-1 text-sm text-gray-900\",children:tenant.emergencyContact.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Relationship\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"mt-1 text-sm text-gray-900\",children:tenant.emergencyContact.relationship})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Phone\"}),/*#__PURE__*/_jsxs(\"dd\",{className:\"mt-1 flex items-center text-sm text-gray-900\",children:[/*#__PURE__*/_jsx(PhoneIcon,{className:\"h-4 w-4 mr-2 text-gray-400\"}),formatPhoneNumber(tenant.emergencyContact.phone)]})]})]})]})})]}),activeTab==='leases'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Lease History\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[leases.length,\" lease\",leases.length!==1?'s':'',\" found\"]})]}),leases.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(HomeIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No leases found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"This tenant doesn't have any leases yet.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:leases.map(lease=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900\",children:lease.property_name||`Property #${lease.propertyId||lease.property_id||'Unknown'}`}),/*#__PURE__*/_jsx(\"span\",{className:`ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getLeaseStatusColor(lease.status||'unknown')}`,children:(lease.status||'unknown').charAt(0).toUpperCase()+(lease.status||'unknown').slice(1)})]}),lease.property_address&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:lease.property_address}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-1 sm:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"mt-1 text-sm text-gray-900\",children:lease.startDate||lease.start_date?formatDate(lease.startDate||lease.start_date):'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"End Date\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"mt-1 text-sm text-gray-900\",children:lease.endDate||lease.end_date?formatDate(lease.endDate||lease.end_date):'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500\",children:\"Monthly Rent\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"mt-1 text-sm text-gray-900\",children:formatCurrency(lease.monthlyRent||lease.monthly_rent||lease.rent_amount||0)})]})]})]})})},lease.id))})]}),activeTab==='payments'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Payment History\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BanknotesIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Payment history coming soon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Payment tracking functionality will be available in a future update.\"})]})]}),activeTab==='documents'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Documents\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Document management coming soon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Document upload and management functionality will be available in a future update.\"})]})]}),tenant&&/*#__PURE__*/_jsx(TenantEditModal,{isOpen:isEditModalOpen,onClose:()=>setIsEditModalOpen(false),tenant:tenant,onSubmit:handleEditSubmit})]});};export default TenantDetail;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}