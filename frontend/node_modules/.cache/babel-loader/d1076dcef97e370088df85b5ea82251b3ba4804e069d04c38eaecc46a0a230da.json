{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import{propertyService}from'../services/propertyService';import{ArrowLeftIcon,ArrowRightIcon,CheckIcon,HomeIcon,CurrencyDollarIcon,SparklesIcon,PlusIcon,TrashIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CreateProperty=()=>{const navigate=useNavigate();const[currentStep,setCurrentStep]=useState(1);const[loading,setLoading]=useState(false);const[amenities,setAmenities]=useState([]);const[newAmenity,setNewAmenity]=useState('');const{register,handleSubmit,formState:{errors},trigger,watch}=useForm();const totalSteps=3;const steps=[{id:1,name:'Basic Info & Address',description:'Property details and location',icon:HomeIcon,fields:['name','type','address.street','address.city','address.state','address.zipCode','address.country']},{id:2,name:'Details & Pricing',description:'Property specs and rent',icon:CurrencyDollarIcon,fields:['bedrooms','bathrooms','squareFeet','rentAmount','deposit']},{id:3,name:'Amenities & Description',description:'Final touches',icon:SparklesIcon,fields:['description']}];const nextStep=async()=>{const currentStepData=steps[currentStep-1];const isValid=await trigger(currentStepData.fields);if(isValid){setCurrentStep(prev=>Math.min(prev+1,totalSteps));}};const prevStep=()=>{setCurrentStep(prev=>Math.max(prev-1,1));};const addAmenity=()=>{if(newAmenity.trim()&&!amenities.includes(newAmenity.trim())){setAmenities([...amenities,newAmenity.trim()]);setNewAmenity('');}};const removeAmenity=index=>{setAmenities(amenities.filter((_,i)=>i!==index));};const handleKeyPress=e=>{if(e.key==='Enter'){e.preventDefault();addAmenity();}};const onSubmit=async data=>{try{setLoading(true);console.log('ðŸ”„ Creating property:',{...data,amenities});const formData={...data,amenities};const newProperty=await propertyService.createProperty(formData);console.log('âœ… Property created successfully:',newProperty);toast.success('Property created successfully!');navigate('/properties');}catch(error){console.error('âŒ Error creating property:',error);toast.error('Failed to create property');}finally{setLoading(false);}};const renderStepContent=()=>{var _errors$address,_errors$address2,_errors$address3,_errors$address4,_errors$address5;switch(currentStep){case 1:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Property Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('name',{required:'Property name is required'}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"e.g., Sunset Apartments Unit 2A\"}),errors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.name.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Property Type *\"}),/*#__PURE__*/_jsxs(\"select\",{...register('type',{required:'Property type is required'}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"apartment\",children:\"Apartment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"house\",children:\"House\"}),/*#__PURE__*/_jsx(\"option\",{value:\"condo\",children:\"Condo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"townhouse\",children:\"Townhouse\"}),/*#__PURE__*/_jsx(\"option\",{value:\"studio\",children:\"Studio\"}),/*#__PURE__*/_jsx(\"option\",{value:\"commercial\",children:\"Commercial\"})]}),errors.type&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.type.message})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Address Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Street Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.street',{required:'Street address is required'}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"123 Main Street\"}),((_errors$address=errors.address)===null||_errors$address===void 0?void 0:_errors$address.street)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.street.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Unit/Apartment Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.unit'),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"Apt 2B, Unit 105, etc. (optional)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"City *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.city',{required:'City is required'}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"San Francisco\"}),((_errors$address2=errors.address)===null||_errors$address2===void 0?void 0:_errors$address2.city)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.city.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"State *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.state',{required:'State is required'}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"CA\"}),((_errors$address3=errors.address)===null||_errors$address3===void 0?void 0:_errors$address3.state)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.state.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"ZIP Code *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.zipCode',{required:'ZIP code is required'}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"94102\"}),((_errors$address4=errors.address)===null||_errors$address4===void 0?void 0:_errors$address4.zipCode)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.zipCode.message})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Country *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",...register('address.country',{required:'Country is required'}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"United States\",defaultValue:\"United States\"}),((_errors$address5=errors.address)===null||_errors$address5===void 0?void 0:_errors$address5.country)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address.country.message})]})]})]})]});case 2:return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Property Details & Pricing\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Bedrooms *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",...register('bedrooms',{required:'Number of bedrooms is required',min:{value:0,message:'Bedrooms cannot be negative'}}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\"}),errors.bedrooms&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.bedrooms.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Bathrooms *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.5\",...register('bathrooms',{required:'Number of bathrooms is required',min:{value:0,message:'Bathrooms cannot be negative'}}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\"}),errors.bathrooms&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.bathrooms.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Square Feet\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",...register('squareFeet',{min:{value:0,message:'Square feet cannot be negative'}}),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"e.g., 850\"}),errors.squareFeet&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.squareFeet.message})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Monthly Rent *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 sm:text-sm\",children:\"$\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.01\",...register('rentAmount',{required:'Rent amount is required',min:{value:0,message:'Rent cannot be negative'}}),className:\"block w-full pl-7 border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"2500.00\"})]}),errors.rentAmount&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.rentAmount.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Security Deposit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 sm:text-sm\",children:\"$\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.01\",...register('deposit',{min:{value:0,message:'Deposit cannot be negative'}}),className:\"block w-full pl-7 border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"2500.00\"})]}),errors.deposit&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.deposit.message})]})]})]})]})});case 3:return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Description & Amenities\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Property Description\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:4,...register('description'),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"Describe the property, its features, and what makes it special...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Amenities\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newAmenity,onChange:e=>setNewAmenity(e.target.value),onKeyPress:handleKeyPress,className:\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm\",placeholder:\"Add an amenity (e.g., Parking, Pool, Gym)\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addAmenity,className:\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\",children:/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4\"})})]}),amenities.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Added amenities:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:amenities.map((amenity,index)=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800\",children:[amenity,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeAmenity(index),className:\"ml-2 inline-flex items-center justify-center w-4 h-4 rounded-full text-green-600 hover:bg-green-200 hover:text-green-800 focus:outline-none\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-3 w-3\"})})]},index))})]})]})]})]})]})});default:return null;}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/properties'),className:\"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 mb-4\",children:[/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-4 w-4 mr-1\"}),\"Back to Properties\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Create New Property\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"Add a new property to your portfolio\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Progress\",children:/*#__PURE__*/_jsx(\"ol\",{className:\"flex items-center\",children:steps.map((step,stepIdx)=>/*#__PURE__*/_jsxs(\"li\",{className:`${stepIdx!==steps.length-1?'pr-8 sm:pr-20':''} relative`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:`\n                      flex items-center justify-center w-10 h-10 rounded-full border-2 \n                      ${currentStep>step.id?'bg-green-600 border-green-600':currentStep===step.id?'border-green-600 bg-white':'border-gray-300 bg-white'}\n                    `,children:currentStep>step.id?/*#__PURE__*/_jsx(CheckIcon,{className:\"w-6 h-6 text-white\"}):/*#__PURE__*/_jsx(step.icon,{className:`w-5 h-5 ${currentStep===step.id?'text-green-600':'text-gray-400'}`})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:`text-sm font-medium ${currentStep>=step.id?'text-green-600':'text-gray-500'}`,children:step.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:step.description})]})]}),stepIdx!==steps.length-1&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-5 left-5 -ml-px mt-0.5 h-full w-0.5 bg-gray-300\",\"aria-hidden\":\"true\"})]},step.name))})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm rounded-lg\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-8\",children:renderStepContent()}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:prevStep,disabled:currentStep===1,className:`\n                  inline-flex items-center px-4 py-2 text-sm font-medium rounded-md\n                  ${currentStep===1?'text-gray-400 cursor-not-allowed':'text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500'}\n                `,children:[/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-4 w-4 mr-2\"}),\"Previous\"]}),currentStep<totalSteps?/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:nextStep,className:\"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\",children:[\"Next\",/*#__PURE__*/_jsx(ArrowRightIcon,{className:\"h-4 w-4 ml-2\"})]}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"inline-flex items-center px-6 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Creating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckIcon,{className:\"h-4 w-4 mr-2\"}),\"Create Property\"]})})]})]})})]})});};export default CreateProperty;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}